(function(){"use strict";var e={2832:function(e,t,s){var n=s(9242),r=s(3396);function a(e,t,s,n,a,i){const o=(0,r.up)("Header"),c=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(o),(0,r.Wm)(c)])}var i={},o=s(89);const c=(0,o.Z)(i,[["render",a]]);var l=c;const u={class:"main"},d={class:"grafics"},v={class:"grafic_first layer"},h={class:"grafic_second layer"};function _(e,t,s,n,a,i){const o=(0,r.up)("grafic"),c=(0,r.up)("service_list"),l=(0,r.up)("add_new_user"),_=(0,r.up)("User_list");return(0,r.wg)(),(0,r.iD)("div",u,[(0,r._)("div",d,[(0,r._)("div",v,[(0,r.Wm)(o,{itemStat:a.stats_req[0]},null,8,["itemStat"]),(0,r.Wm)(o,{itemStat:a.stats_req[1]},null,8,["itemStat"])]),(0,r._)("div",h,[(0,r.Wm)(o,{itemStat:a.stats_req[2]},null,8,["itemStat"]),(0,r.Wm)(o,{itemStat:a.stats_req[3]},null,8,["itemStat"])])]),(0,r.Wm)(c,{services:a.services_req,onChange:i.change,onRemoveService:i.remove,onAdd_service:i.add_new_service},null,8,["services","onChange","onRemoveService","onAdd_service"]),(0,r.Wm)(l,{onAdd_user:i.add_user},null,8,["onAdd_user"]),(0,r.Wm)(_,{users:a.users,onDeleteUser:i.deleteUser},null,8,["users","onDeleteUser"])])}s(560);var p=s(1076),m={name:"Main",data(){return{services_req:[],stats_req:[],users:[]}},methods:{async remove(e){console.log(e),this.services_req=this.services_req.filter((t=>t.id!==e.id));try{await p.Z.post("/api/deleteService",{id:e.id},{headers:{Authorization:`Bearer ${localStorage.access_token}`}})}catch{this.$router.push("/login")}},change(e){this.services_req=this.services_req.filter((t=>{t.name==e.name&&(t.statusSwitchIs=String(e.change).toUpperCase())})),"START"==e.statusSwitchIs?(e.statusSwitchIs="STOP",e.change="stop"):(e.statusSwitchIs="START",e.change="start"),p.Z.post("/api/change",{name:e.name,status:e.change},{headers:{Authorization:`Bearer ${localStorage.access_token}`}})},async deleteUser(e){this.users=this.users.filter((t=>t.id!==e.id)),p.Z.post("/users/delete",{id:e.id},{headers:{Authorization:`Bearer ${localStorage.access_token}`}})},add_user(e){""==!e.login&&""==!e.password&&""==!e.status&&(this.users.push(e),p.Z.post("/auth/registration",e,{headers:{Authorization:`Bearer ${localStorage.access_token}`}}))},async fetchData(){try{const e=await p.Z.get("/api/all",{headers:{Authorization:`Bearer ${localStorage.access_token}`}});this.stats_req=e.data.system,this.services_req=e.data.services}catch{this.$router.push("/login")}},async fetchUsers(){try{const e=await p.Z.get("/users/all",{headers:{Authorization:`Bearer ${localStorage.access_token}`}});this.users=e.data}catch{this.$router.push("/login")}},async add_new_service(e){try{await p.Z.post("/api/createService",{name:e},{headers:{Authorization:`Bearer ${localStorage.access_token}`}})}catch{this.$router.push("/login")}}},async beforeMount(){await this.fetchData(),await this.fetchUsers()},async mounted(){await setInterval((()=>{this.fetchData(),this.fetchUsers()}),1e3)}};const g=(0,o.Z)(m,[["render",_],["__scopeId","data-v-75919e6e"]]);var w=g;const f=e=>((0,r.dD)("data-v-30b58b1e"),e=e(),(0,r.Cn)(),e),y={class:"auth_main"},S={class:"auth"},b=f((()=>(0,r._)("h2",null,"Авторизируйтесь",-1))),k={class:"login"},D={class:"passwd"};function U(e,t,s,a,i,o){return(0,r.wg)(),(0,r.iD)("div",y,[(0,r._)("div",S,[b,(0,r._)("div",k,[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.model.login=e),type:"text",class:"input login",placeholder:"Введите логин",size:"25"},null,512),[[n.nr,i.model.login]])]),(0,r._)("div",D,[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.model.password=e),type:"text",onKeyup:t[2]||(t[2]=(0,n.D2)(((...e)=>o.login&&o.login(...e)),["enter"])),class:"input passwd",placeholder:"Введите пароль",size:"25"},null,544),[[n.nr,i.model.password]])]),(0,r._)("button",{class:"btn send",onClick:t[3]||(t[3]=(...e)=>o.login&&o.login(...e))},"Отправить")])])}var $={name:" Auth",data(){return{model:{login:null,password:null}}},methods:{login(){p.Z.post("/auth/login",{login:this.model.login,password:this.model.password}).then((e=>{localStorage.access_token=e.data.token,this.$router.push("/")}))}}};const C=(0,o.Z)($,[["render",U],["__scopeId","data-v-30b58b1e"]]);var O=C;const I=e=>((0,r.dD)("data-v-8732c194"),e=e(),(0,r.Cn)(),e),Z={class:"header"},A={class:"btns"},q=I((()=>(0,r._)("h3",null,"HOME",-1))),z=[q],j=I((()=>(0,r._)("div",{class:"title"},[(0,r._)("h3",null,"Popcorn")],-1))),T={class:"btns"},x=I((()=>(0,r._)("h3",null,"LOG OUT",-1))),W=[x];function R(e,t,s,n,a,i){return(0,r.wg)(),(0,r.iD)("div",Z,[(0,r._)("div",A,[(0,r._)("button",{class:"home btn",onClick:t[0]||(t[0]=(...e)=>i.home&&i.home(...e))},z)]),j,(0,r._)("div",T,[(0,r._)("button",{class:"logout btn",onClick:t[1]||(t[1]=(...e)=>i.logout&&i.logout(...e))},W)])])}var B={name:"Header",data(){return{}},methods:{logout(){localStorage.access_token="",this.$router.push("/login")},home(){this.$router.push("/")}},mounted(){}};const P=(0,o.Z)(B,[["render",R],["__scopeId","data-v-8732c194"]]);var H=P;const M={class:"btn"};function V(e,t,s,n,a,i){return(0,r.wg)(),(0,r.iD)("div",M,[(0,r.WI)(e.$slots,"default")])}var F={name:"btn"};const K=(0,o.Z)(F,[["render",V]]);var E=K;const Y=e=>((0,r.dD)("data-v-1f480041"),e=e(),(0,r.Cn)(),e),G={key:0,class:"services"},L={class:"add_service"},J=Y((()=>(0,r._)("h4",null,"Добавить сервис",-1))),N=Y((()=>(0,r._)("h5",null,"Название",-1))),Q={key:1,class:"services"};function X(e,t,s,a,i,o){const c=(0,r.up)("Service");return s.services.length<8?((0,r.wg)(),(0,r.iD)("div",G,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.services,(t=>((0,r.wg)(),(0,r.j4)(c,{service:t,key:t.id,onChange:s=>e.$emit("change",t),onRemoveService:s=>e.$emit("removeService",t)},null,8,["service","onChange","onRemoveService"])))),128)),(0,r._)("div",L,[J,N,(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.name=e),class:"input input_service",type:"text",placeholder:"name"},null,512),[[n.nr,i.name]]),(0,r._)("button",{onClick:t[1]||(t[1]=(...e)=>o.add_new_servie&&o.add_new_servie(...e)),class:"btn"},"Добавить")])])):((0,r.wg)(),(0,r.iD)("div",Q,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.services,(t=>((0,r.wg)(),(0,r.j4)(c,{service:t,key:t.id,onChange:e.change,onRemoveService:s=>e.$emit("removeService",t)},null,8,["service","onChange","onRemoveService"])))),128))]))}var ee={name:"service_list",props:{services:{type:Array,required:!0}},data(){return{name:""}},methods:{add_new_servie(){this.$emit("add_service",this.name)},statusSwitch(e){this.$emit("change",e)}}};const te=(0,o.Z)(ee,[["render",X],["__scopeId","data-v-1f480041"]]);var se=te,ne=s(7139);const re={class:"grafic"},ae={class:"load"};function ie(e,t,s,n,a,i){return(0,r.wg)(),(0,r.iD)("div",re,[(0,r._)("div",{class:"stat",style:(0,ne.j5)(s.itemStat.style)},[(0,r._)("div",ae,(0,ne.zw)(s.itemStat.count+" "+s.itemStat.system),1)],4),(0,r.Uk)(" "+(0,ne.zw)(s.itemStat.name),1)])}var oe={name:"grafic",props:{itemStat:{required:!0,type:Object}},methods:{getColor(e){return e<=45?"#00CA14":e<=75?"#FFE601":"#FF0000"}}};const ce=(0,o.Z)(oe,[["render",ie],["__scopeId","data-v-ec8380c6"]]);var le=ce;const ue={class:"service"},de={class:"name"},ve={class:"status"},he={class:"btns"};function _e(e,t,s,n,a,i){return(0,r.wg)(),(0,r.iD)("div",ue,[(0,r._)("h3",de,(0,ne.zw)(s.service.name),1),(0,r._)("h4",ve,(0,ne.zw)(s.service.status),1),(0,r._)("div",he,[(0,r._)("button",{onClick:t[0]||(t[0]=(...e)=>i.removeService&&i.removeService(...e)),class:"delete btn"},"Удалить"),(0,r._)("button",{onClick:t[1]||(t[1]=(...e)=>i.change&&i.change(...e)),class:"start_stop btn"},(0,ne.zw)(s.service.statusSwitchIs),1)])])}var pe={name:"Service",props:{service:{required:!0,type:Object}},methods:{change(){this.$emit("change",this.service)},removeService(){this.$emit("removeService",this.service)}},data(){return{}}};const me=(0,o.Z)(pe,[["render",_e],["__scopeId","data-v-8b0cec98"]]);var ge=me;const we=e=>((0,r.dD)("data-v-0bc2a97e"),e=e(),(0,r.Cn)(),e),fe={class:"add_new_user"},ye=we((()=>(0,r._)("h3",null,"Добавить нового пользователя",-1))),Se={class:"login div_input"},be=we((()=>(0,r._)("h3",null,"Логин",-1))),ke={class:"password div_input"},De=we((()=>(0,r._)("h3",null,"Пароль",-1))),Ue={class:"status div_input"},$e=we((()=>(0,r._)("h3",null,"Статус",-1)));function Ce(e,t,s,a,i,o){return(0,r.wg)(),(0,r.iD)("div",fe,[ye,(0,r._)("div",Se,[be,(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.new_user.login=e),class:"input input_login",type:"text",placeholder:"login"},null,512),[[n.nr,i.new_user.login]])]),(0,r._)("div",ke,[De,(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.new_user.password=e),class:"input input_password",type:"text",placeholder:"password"},null,512),[[n.nr,i.new_user.password]])]),(0,r._)("div",Ue,[$e,(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>i.new_user.status=e),onKeyup:t[3]||(t[3]=(0,n.D2)(((...e)=>o.add_user&&o.add_user(...e)),["enter"])),class:"input input_status",type:"text",placeholder:"status"},null,544),[[n.nr,i.new_user.status]])]),(0,r._)("button",{class:"btn",onClick:t[4]||(t[4]=(...e)=>o.add_user&&o.add_user(...e))},"Добавить")])}var Oe={name:"add_new_user",data(){return{new_user:{login:"",password:"",status:""}}},methods:{add_user(){this.$emit("add_user",this.new_user),this.new_user={login:"",password:"",status:""}}},mounted(){}};const Ie=(0,o.Z)(Oe,[["render",Ce],["__scopeId","data-v-0bc2a97e"]]);var Ze=Ie;const Ae=e=>((0,r.dD)("data-v-7e7047f3"),e=e(),(0,r.Cn)(),e),qe={key:0,class:"user_list"},ze=Ae((()=>(0,r._)("h3",null,null,-1))),je={key:1,class:"user_list"};function Te(e,t,s,n,a,i){const o=(0,r.up)("UserItem");return s.users.length>0?((0,r.wg)(),(0,r.iD)("div",qe,[ze,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.users,(t=>((0,r.wg)(),(0,r.j4)(o,{user:t,key:t.id,onDeleteUser:s=>e.$emit("deleteUser",t)},null,8,["user","onDeleteUser"])))),128))])):((0,r.wg)(),(0,r.iD)("h3",je,"Пользователей нет"))}var xe={name:"User_list",props:{users:{type:Array}}};const We=(0,o.Z)(xe,[["render",Te],["__scopeId","data-v-7e7047f3"]]);var Re=We;const Be={class:"user_item"},Pe={class:"id_user"},He={class:"user_name"},Me={class:"user_status"};function Ve(e,t,s,n,a,i){return(0,r.wg)(),(0,r.iD)("div",Be,[(0,r._)("div",Pe,"ID: "+(0,ne.zw)(s.user.id),1),(0,r._)("div",He,"ЛОГИН: "+(0,ne.zw)(s.user.login),1),(0,r._)("div",Me,"STATUS: "+(0,ne.zw)(s.user.status),1),(0,r._)("button",{onClick:t[0]||(t[0]=(...e)=>i.deleteUser&&i.deleteUser(...e)),class:"delete btn"},"Удалить")])}var Fe={name:"UserItem",props:{user:{required:!0,type:Object}},methods:{deleteUser(){this.$emit("deleteUser",this.user)}}};const Ke=(0,o.Z)(Fe,[["render",Ve],["__scopeId","data-v-6cda95e8"]]);var Ee=Ke,Ye=[H,E,w,O,ge,le,se,Ze,Re,Ee],Ge=s(2483);const Le=(0,Ge.p7)({routes:[{path:"/",component:w},{path:"/login",component:O}],history:(0,Ge.PO)()}),Je=(0,n.ri)(l);Ye.forEach((e=>{Je.component(e.name,e)})),Je.use(Le),Je.mount("#app")}},t={};function s(n){var r=t[n];if(void 0!==r)return r.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,s),a.exports}s.m=e,function(){var e=[];s.O=function(t,n,r,a){if(!n){var i=1/0;for(u=0;u<e.length;u++){n=e[u][0],r=e[u][1],a=e[u][2];for(var o=!0,c=0;c<n.length;c++)(!1&a||i>=a)&&Object.keys(s.O).every((function(e){return s.O[e](n[c])}))?n.splice(c--,1):(o=!1,a<i&&(i=a));if(o){e.splice(u--,1);var l=r();void 0!==l&&(t=l)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[n,r,a]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,a,i=n[0],o=n[1],c=n[2],l=0;if(i.some((function(t){return 0!==e[t]}))){for(r in o)s.o(o,r)&&(s.m[r]=o[r]);if(c)var u=c(s)}for(t&&t(n);l<i.length;l++)a=i[l],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(u)},n=self["webpackChunkpopcorn_frontend"]=self["webpackChunkpopcorn_frontend"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=s.O(void 0,[998],(function(){return s(2832)}));n=s.O(n)})();
//# sourceMappingURL=app.bc663e49.js.map